(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57839b57"],{"0da4":function(e,t,a){},"18fb":function(e,t,a){"use strict";a.r(t);var d=a("7a23");const o=Object(d["O"])("data-v-82198ef0");Object(d["w"])("data-v-82198ef0");const s={key:0,class:"create-note-modal"},c={class:"modal fade",id:"create-note",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},n={class:"modal-dialog",role:"document"},i={class:"modal-content"},r=Object(d["f"])('<div class="modal-header bg-primary" data-v-82198ef0><div class="container" data-v-82198ef0><div class="row" data-v-82198ef0><div class="col-12" data-v-82198ef0><span type="button" class="close py-4" data-dismiss="modal" aria-label="Close" data-v-82198ef0><span aria-hidden="true" data-v-82198ef0>×</span></span><h4 class="modal-title" data-v-82198ef0> New Note </h4></div></div></div></div>',1),l={class:"modal-body"},b={class:"container"},v=Object(d["h"])("div",{class:"form-group"},null,-1),h=Object(d["h"])("button",{class:"btn btn-success",type:"submit"}," Create ",-1),p={key:1,class:"create-note-modal"},u={class:"modal fade",id:"create-note",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},m={class:"modal-dialog",role:"document"},f={class:"modal-content"},O=Object(d["f"])('<div class="modal-header bg-primary" data-v-82198ef0><div class="container" data-v-82198ef0><div class="row" data-v-82198ef0><div class="col-12" data-v-82198ef0><span type="button" class="close py-3" data-dismiss="modal" aria-label="Close" data-v-82198ef0><span aria-hidden="true" data-v-82198ef0>×</span></span><h4 class="modal-title" data-v-82198ef0> New Note </h4></div></div></div></div>',1),j={class:"modal-body"},y=Object(d["h"])("div",null,[Object(d["h"])("button",{class:"btn btn-success",type:"submit"}," Create ")],-1);Object(d["u"])();const w=o((e,t,a,o,w,N)=>o.state.viewportWidth<=700?(Object(d["t"])(),Object(d["d"])("div",s,[Object(d["h"])("div",c,[Object(d["h"])("div",n,[Object(d["h"])("div",i,[r,Object(d["h"])("div",l,[Object(d["h"])("div",b,[Object(d["h"])("form",{class:"form-inline",onSubmit:t[2]||(t[2]=Object(d["N"])((...e)=>o.createNote&&o.createNote(...e),["prevent"]))},[v,Object(d["L"])(Object(d["h"])("textarea",{name:"note-text",id:"note-description",cols:"30",rows:"5",placeholder:"Add a Note","aria-describedby":"helpId","onUpdate:modelValue":t[1]||(t[1]=e=>o.state.note.body=e),required:""},null,512),[[d["G"],o.state.note.body]]),h],32)])])])])])])):(Object(d["t"])(),Object(d["d"])("div",p,[Object(d["h"])("div",u,[Object(d["h"])("div",m,[Object(d["h"])("div",f,[O,Object(d["h"])("div",j,[Object(d["h"])("form",{class:"form-inline",onSubmit:t[4]||(t[4]=Object(d["N"])((...e)=>o.createNote&&o.createNote(...e),["prevent"]))},[Object(d["h"])("div",null,[Object(d["L"])(Object(d["h"])("textarea",{name:"note-text",id:"note-description",cols:"30",rows:"5",placeholder:"Add a Note","aria-describedby":"helpId","onUpdate:modelValue":t[3]||(t[3]=e=>o.state.note.body=e),required:""},null,512),[[d["G"],o.state.note.body]]),y])],32)])])])])])));var N=a("8a4e"),g=a("1157"),I=a.n(g),x=a("83fc"),k=a("5a80"),A={name:"CreateNoteModal",setup(){const e=Object(d["x"])({note:{},notes:Object(d["b"])(()=>x["a"].notes),rental:Object(d["b"])(()=>x["a"].rental),viewportWidth:window.innerWidth});return Object(d["r"])(()=>{window.addEventListener("resize",()=>{e.viewportWidth=window.innerWidth})}),{state:e,async createNote(){try{e.note.rentalId=e.rental.id,await k["a"].createNote(e.note),e.note={},I()("#create-note").modal("hide"),I()(".modal-backdrop").remove()}catch(t){N["a"].error(t)}}}}};a("4ff9");A.render=w,A.__scopeId="data-v-82198ef0";t["default"]=A},"4ff9":function(e,t,a){"use strict";a("0da4")},"5a80":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var d=a("2b20"),o=a("83fc"),s=a("8a4e");class c{constructor(e){this.id=e.id||e._id,this.body=e.body||e.description,this.rentalId=e.rentalId,this.createdAt=e.createdAt,this.creatorId=e.creatorId,this.creator=e.creator}}class n{async getAll(){try{const e=await d["a"].get("api/notes");o["a"].notes=e.data.map(e=>new c(e))}catch(e){s["a"].log(e)}}async getNotesByRentalId(e){try{const t=await d["a"].get("api/notes/"+e+"/notes");o["a"].notes=t.data.map(e=>new c(e))}catch(t){s["a"].error(t)}}async createNote(e){try{delete e.id;const t=await d["a"].post("api/notes",e);return o["a"].notes.push(t.data),t.data._id}catch(t){s["a"].error(t)}}async delete(e){const t=window.confirm("Are you sure you want to delete this note?");if(t)try{await d["a"].delete("/api/notes/"+e.id),o["a"].notes.splice(o["a"].notes.indexOf(e),1)}catch(a){s["a"].error(a)}}}const i=new n}}]);