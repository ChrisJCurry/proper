(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f345b89e"],{"5a80":function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));var s=e("2b20"),c=e("83fc"),n=e("8a4e");class r{constructor(t){this.id=t.id||t._id,this.body=t.body||t.description,this.rentalId=t.rentalId,this.createdAt=t.createdAt,this.creatorId=t.creatorId,this.creator=t.creator}}class d{async getAll(){try{const t=await s["a"].get("api/notes");c["a"].notes=t.data.map(t=>new r(t))}catch(t){n["a"].log(t)}}async getNotesByRentalId(t){try{const a=await s["a"].get("api/notes/"+t+"/notes");c["a"].notes=a.data.map(t=>new r(t))}catch(a){n["a"].error(a)}}async createNote(t){try{delete t.id;const a=await s["a"].post("api/notes",t);return c["a"].notes.push(a.data),a.data._id}catch(a){n["a"].error(a)}}async delete(t){const a=window.confirm("Are you sure you want to delete this note?");if(a)try{await s["a"].delete("/api/notes/"+t.id),c["a"].notes.splice(c["a"].notes.indexOf(t),1)}catch(e){n["a"].error(e)}}}const o=new d},"63b7":function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));var s=e("2b20"),c=e("83fc"),n=e("8a4e");class r{constructor(t){this.id=t.id||t._id,this.title=t.title,this.closed=t.closed,this.dueDate=t.dueDate,this.description=t.description,this.rentalId=t.rentalId,this.creatorId=t.creatorId,this.createdAt=t.createdAt,this.creator=t.creator}}class d{async getAll(){try{const t=await s["a"].get("api/tasks");c["a"].tasks=t.data.map(t=>new r(t))}catch(t){n["a"].log(t)}}async getTasksByRentalId(t){try{const a=await s["a"].get("api/tasks/"+t+"/tasks");c["a"].tasks=a.data.map(t=>new r(t))}catch(a){n["a"].error(a)}}async createTask(t){try{delete t.id;const a=await s["a"].post("api/tasks",t);return c["a"].tasks.push(a.data),a.data}catch(a){n["a"].error(a)}}async edit(t){try{const a=await s["a"].put("api/tasks/"+t.id);return a.data}catch(a){n["a"].error(a)}}async delete(t){const a=window.confirm("Are you sure you want to delete this task?");if(a)try{await s["a"].delete("/api/tasks/"+t.id),c["a"].tasks.splice(c["a"].tasks.indexOf(t),1)}catch(e){n["a"].error(e)}}}const o=new d},"7b2f":function(t,a,e){"use strict";e.d(a,"a",(function(){return o}));var s=e("2b20"),c=e("83fc"),n=e("8a4e");class r{constructor(t){this.id=t.id||t._id,this.address=t.address||"Default Street",this.rent=t.rent||"0",this.yearBuilt=t.yearBuilt||"0",this.closed=t.closed,this.creatorId=t.creatorId,this.tenants=t.tenants||"",this.picture=t.picture||"",this.notes=t.notes}}class d{async getAll(){try{const t=await s["a"].get("api/rentals");c["a"].rentals=t.data.map(t=>new r(t))}catch(t){n["a"].error(t)}}async getById(t){try{const a=await s["a"].get("api/rentals/"+t);c["a"].rental=a.data}catch(a){n["a"].error(a)}}async getTasksById(t){try{const a=await s["a"].get("api/rentals/"+t+"/tasks");return a.data}catch(a){n["a"].error(a)}}async getNotesById(t){try{const a=await s["a"].get(`api/rentals/${t}/notes`);return a.data}catch(a){n["a"].error(a)}}async getTenantsByRentalId(t){try{const a=await s["a"].get("api/rentals/"+t+"/tenants");c["a"].rental.tenants=a.data,c["a"].tenant=a.data}catch(a){n["a"].log(a)}}async create(t){try{const a=await s["a"].post("api/rentals",t);return c["a"].rentals.push(a.data),a.data}catch(a){n["a"].error(a)}}async edit(t){try{const a=await s["a"].put("api/rentals/"+t.id,t);this.getById(a.data._id)}catch(a){n["a"].error(a)}}async delete(t){const a=window.confirm("Are you sure you want to remove this rental?");if(a)try{await s["a"].delete("api/rentals/"+t),this.getById(t)}catch(e){n["a"].error(e)}}}const o=new d},9391:function(t,a,e){"use strict";e.r(a);var s=e("7a23");const c=Object(s["O"])("data-v-a508b22e");Object(s["w"])("data-v-a508b22e");const n={class:"container-fluid"},r=Object(s["h"])("div",{class:"row"},null,-1),d={key:0,class:"rental-details-page"},o=Object(s["f"])('<div class="row mt-2 text-center" data-v-a508b22e><div class="col-6" data-v-a508b22e><button class="btn btn-info btn-block" type="button" data-toggle="modal" data-target="#create-note" data-v-a508b22e> Add a Note </button></div><div class="col-6" data-v-a508b22e><button class="btn btn-info btn-block" data-toggle="modal" data-target="#create-task" data-v-a508b22e> Add a Task </button></div></div>',1),i={class:"row mt-3"},l={class:"col-12"},b={class:"card shadow"},h={class:"card-body"},u={class:"card-title"},O=Object(s["h"])("p",{class:"card-text"},null,-1),j={class:"row justify-content-center"},y={class:"btn-group btn-block",role:"group","aria-label":"Basic example"},p=Object(s["h"])("button",{type:"button","data-toggle":"modal","data-target":"#rental-info-modal",class:"btn btn-dark text-primary"}," Rental Info ",-1),w={key:0},g=Object(s["h"])("h4",{class:"text-center mt-3"}," Tasks ",-1),k={class:"row"},m={key:0},v={class:"card-body p-0 muted"},f={class:"card-header text-center bg-primary"},I={class:"card-text mt-1 ml-2"},x={class:"list-group list-group-flush mt-3 ml-5"},T={class:"mt-1"},B={class:"mt-1"},A={class:"btn-group btn-block btn-warning mt-3",role:"group","aria-label":"Basic example"},D=Object(s["h"])("h6",{class:"m-0"}," Reactivate ",-1),C={key:1},N={class:"card-body p-0 shadow"},E={class:"card-header text-center bg-primary"},R={class:"card-text mt-1 ml-2"},_={class:"list-group list-group-flush mt-3 ml-5"},S={class:"mt-1 small"},L={class:"mt-1 small"},z={key:1},J=Object(s["h"])("h4",{class:"text-center mt-3"}," Notes ",-1),M={class:"row text-center"},P={class:"card shadow bg-white rounded mt-2"},$={class:"card-body p-0"},q={class:"card-text mt-1"},F={class:"card-text text-center mt-2"};Object(s["u"])();const G=c((t,a,e,c,G,H)=>{const K=Object(s["B"])("RentalInfoModal");return Object(s["t"])(),Object(s["d"])("div",n,[r,c.state.rental.address?(Object(s["t"])(),Object(s["d"])("div",d,[o,Object(s["h"])("div",i,[Object(s["h"])("div",l,[Object(s["h"])("div",b,[Object(s["h"])("img",{class:"card-img-top img-fluid",src:c.state.rental.picture,alt:"property"},null,8,["src"]),Object(s["h"])("div",h,[Object(s["h"])("h5",u,Object(s["E"])(c.state.rental.address.street),1),O,Object(s["h"])("div",j,[Object(s["h"])("div",y,[Object(s["h"])("button",{class:"btn btn-primary text-dark",onClick:a[1]||(a[1]=(...t)=>c.toggle&&c.toggle(...t))}," Notes "),p,Object(s["h"])("button",{class:"btn btn-primary text-dark",onClick:a[2]||(a[2]=(...t)=>c.toggle&&c.toggle(...t))}," Tasks ")])]),Object(s["h"])(K,{rental:c.state.rental},null,8,["rental"])])])])]),c.state.showTasks?(Object(s["t"])(),Object(s["d"])("div",w,[g,Object(s["h"])("div",k,[(Object(s["t"])(!0),Object(s["d"])(s["a"],null,Object(s["z"])(c.state.tasks,t=>(Object(s["t"])(),Object(s["d"])("div",{class:"col-12 mt-4",key:t.id},[t.closed?(Object(s["t"])(),Object(s["d"])("div",m,[Object(s["h"])("div",{class:"card overlay",id:t.id},[Object(s["h"])("div",v,[Object(s["h"])("h6",f,Object(s["E"])(t.title),1),Object(s["h"])("div",I,Object(s["E"])(t.description),1),Object(s["h"])("ul",x,[Object(s["h"])("li",T," Created: "+Object(s["E"])(new Date(t.createdAt).toLocaleString()),1),Object(s["h"])("li",B," Due: "+Object(s["E"])(new Date(t.dueDate).toLocaleString()),1)]),Object(s["h"])("div",A,[Object(s["h"])("button",{class:"btn btn-dark",onClick:a=>c.disableTask(t)},[D],8,["onClick"]),Object(s["h"])("button",{class:"btn btn-warning",type:"button",onClick:a=>c.removeTask(t)}," Delete Task ",8,["onClick"])])])],8,["id"])])):(Object(s["t"])(),Object(s["d"])("div",C,[Object(s["h"])("div",{class:"card",id:t.id},[Object(s["h"])("div",N,[Object(s["h"])("h6",E,Object(s["E"])(t.title),1),Object(s["h"])("div",R,Object(s["E"])(t.description),1),Object(s["h"])("ul",_,[Object(s["h"])("li",S," Created: "+Object(s["E"])(new Date(t.createdAt).toLocaleString()),1),Object(s["h"])("li",L," Due: "+Object(s["E"])(new Date(t.dueDate).toLocaleString()),1)]),Object(s["h"])("button",{class:"btn btn-dark btn-block mt-3",onClick:a=>c.disableTask(t)}," Complete ",8,["onClick"])])],8,["id"])]))]))),128))])])):Object(s["e"])("",!0)])):Object(s["e"])("",!0),c.state.showNotes?(Object(s["t"])(),Object(s["d"])("div",z,[J,Object(s["h"])("div",M,[(Object(s["t"])(!0),Object(s["d"])(s["a"],null,Object(s["z"])(c.state.notes,t=>(Object(s["t"])(),Object(s["d"])("div",{class:"col-12",key:t.id},[Object(s["h"])("div",P,[Object(s["h"])("div",$,[Object(s["h"])("div",q,Object(s["E"])(t.body),1),Object(s["h"])("div",F,[Object(s["h"])("small",null,"created: "+Object(s["E"])(new Date(t.createdAt).toLocaleString()),1)]),Object(s["h"])("button",{class:"btn btn-sm btn-block btn-dark mt-2",onClick:a=>c.removeNote(t)}," Delete ",8,["onClick"])])])]))),128))])])):Object(s["e"])("",!0)])});var H=e("6c02"),K=e("7b2f"),Q=e("63b7"),U=e("83fc"),V=e("5a80");const W=Object(s["i"])(()=>e.e("chunk-2d22cfab").then(e.bind(null,"f616")));var X={name:"RentalDetailsPage",setup(){const t=Object(H["d"])(),a=Object(s["x"])({rental:Object(s["b"])(()=>U["a"].rental),tasks:Object(s["b"])(()=>U["a"].tasks),notes:Object(s["b"])(()=>U["a"].notes),showNotes:!1,showTasks:!0});return Object(s["r"])(async()=>{await K["a"].getById(t.params.id),await Q["a"].getTasksByRentalId(t.params.id),await V["a"].getNotesByRentalId(t.params.id)}),{state:a,toggle(){a.showNotes=!a.showNotes,a.showTasks=!a.showTasks},async removeNote(t){await V["a"].delete(t)},async disableTask(t){await Q["a"].edit(t),Q["a"].getTasksByRentalId(t.rentalId)},async removeTask(t){await Q["a"].delete(t),await Q["a"].getAll()}}},components:{RentalInfoModal:W}};e("e64d");X.render=G,X.__scopeId="data-v-a508b22e";a["default"]=X},dc9a:function(t,a,e){},e64d:function(t,a,e){"use strict";e("dc9a")}}]);