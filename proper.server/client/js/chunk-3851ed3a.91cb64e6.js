(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3851ed3a"],{"010f":function(e,t,a){"use strict";a.r(t);var n=a("7a23");const c=Object(n["O"])("data-v-4c069144");Object(n["w"])("data-v-4c069144");const r={class:"new-rental-accordion row",id:"rental-accordion"},l={class:"accordion col-xl-12",id:"accordionExample"},d={class:"card"},o=Object(n["h"])("div",{class:"border-bottom border-dark card-header bg-primary",id:"headingOne"},[Object(n["h"])("h2",null,[Object(n["h"])("button",{class:"btn btn-block text-left",type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Owner Information ")])],-1),s={id:"collapseOne",class:"collapse show","aria-labelledby":"headingOne","data-parent":"#accordionExample"},b={class:"card-body"},i={action:"submit",class:"form-group"},p={class:"card"},u=Object(n["h"])("div",{class:"border-bottom border-dark card-header bg-primary",id:"headingTwo"},[Object(n["h"])("h2",{class:"mb-0"},[Object(n["h"])("button",{class:"btn btn-block text-left collapsed",type:"button","data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo",id:"accordion-two-button"}," Rental Info ")])],-1),h={id:"collapseTwo",class:"collapse","aria-labelledby":"headingTwo","data-parent":"#accordionExample"},O={class:"card-body"},w={class:"card"},j=Object(n["h"])("div",{class:"card-header border-bottom border-dark bg-primary",id:"headingThree"},[Object(n["h"])("h2",{class:"mb-0"},[Object(n["h"])("button",{class:"btn btn-block text-left collapsed",type:"button","data-toggle":"collapse","data-target":"#collapseThree","aria-expanded":"false","aria-controls":"collapseThree",id:"accordion-three-button"}," Tenant Info ")])],-1),m={id:"collapseThree",class:"collapse","aria-labelledby":"headingThree","data-parent":"#accordionExample"},y={class:"card-body"},g={key:0},T=Object(n["h"])("button",{type:"submit",class:"btn btn-dark text-primary"}," Add Tenant ",-1),f={key:2},v={class:"bg-primary border border-danger block py-1 my-1"},x={class:"container-fluid"},k={class:"row"},R={class:"col-8"},A={class:"title"},q=Object(n["h"])("hr",null,null,-1),U={class:"col-1 offset-1"},V={class:"row"},G={class:"col"},I=Object(n["h"])("span",{class:"font-weight-bold"},"-",-1),L={class:"card"},C=Object(n["h"])("div",{class:"border-bottom border-dark card-header bg-primary",id:"headingTwo"},[Object(n["h"])("h2",{class:"mb-0"},[Object(n["h"])("button",{class:"btn btn-block text-left collapsed",type:"button","data-toggle":"collapse","data-target":"#collapseFour","aria-expanded":"false","aria-controls":"collapseFour"}," Add a picture? ")])],-1),E={id:"collapseFour",class:"collapse","aria-labelledby":"headingTwo","data-parent":"#accordionExample"},P={class:"card-body"};Object(n["u"])();const B=c((e,t,a,c,B,N)=>(Object(n["t"])(),Object(n["d"])("div",r,[Object(n["h"])("div",l,[Object(n["h"])("div",d,[o,Object(n["h"])("div",s,[Object(n["h"])("div",b,[Object(n["h"])("form",i,[Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"John Doe",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>c.state.newOwner.name=e)},null,512),[[n["G"],c.state.newOwner.name]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"(123) 456-7890",type:"tel",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}","onUpdate:modelValue":t[2]||(t[2]=e=>c.state.newOwner.phone=e)},null,512),[[n["G"],c.state.newOwner.phone]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"Street",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>c.state.ownerAddress.street=e)},null,512),[[n["G"],c.state.ownerAddress.street]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"City",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>c.state.ownerAddress.city=e)},null,512),[[n["G"],c.state.ownerAddress.city]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"State",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>c.state.ownerAddress.state=e)},null,512),[[n["G"],c.state.ownerAddress.state]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"ZIP Code",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>c.state.ownerAddress.zip=e)},null,512),[[n["G"],c.state.ownerAddress.zip]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"Country",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>c.state.ownerAddress.country=e)},null,512),[[n["G"],c.state.ownerAddress.country]])]),Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"john.doe@test.com",type:"email",name:"ownerEmail","onUpdate:modelValue":t[8]||(t[8]=e=>c.state.newOwner.email=e),onKeydown:[t[9]||(t[9]=Object(n["M"])((...e)=>c.accordionPageTwo&&c.accordionPageTwo(...e),["enter"])),t[10]||(t[10]=Object(n["M"])((...e)=>c.accordionPageTwo&&c.accordionPageTwo(...e),["tab"]))]},null,544),[[n["G"],c.state.newOwner.email]])])])])]),Object(n["h"])("div",p,[u,Object(n["h"])("div",h,[Object(n["h"])("div",O,[Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",id:"street-name",required:"",autofocus:"",placeholder:"Broadway",type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>c.state.address.street=e)},null,512),[[n["G"],c.state.address.street]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"#A113",type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>c.state.address.aptNum=e)},null,512),[[n["G"],c.state.address.aptNum]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"New York",type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>c.state.address.city=e)},null,512),[[n["G"],c.state.address.city]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"United States of America",type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>c.state.address.country=e)},null,512),[[n["G"],c.state.address.country]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",pattern:"[0-9]{5}",placeholder:"ZIP Code",type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>c.state.address.zip=e)},null,512),[[n["G"],c.state.address.zip]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"$1400",type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>c.state.newRental.rent=e)},null,512),[[n["G"],c.state.newRental.rent]])]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mr-1",required:"",placeholder:"Year Built",type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>c.state.newRental.yearBuilt=e),onKeydown:[t[18]||(t[18]=Object(n["M"])((...e)=>c.accordionPageThree&&c.accordionPageThree(...e),["enter"])),t[19]||(t[19]=Object(n["M"])((...e)=>c.accordionPageThree&&c.accordionPageThree(...e),["tab"]))]},null,544),[[n["G"],c.state.newRental.yearBuilt]])])])])]),Object(n["h"])("div",w,[j,Object(n["h"])("div",m,[Object(n["h"])("div",y,[c.state.showCreateTenant?Object(n["e"])("",!0):(Object(n["t"])(),Object(n["d"])("span",g,[Object(n["h"])("button",{onClick:t[20]||(t[20]=e=>c.state.showCreateTenant=!c.state.showCreateTenant),class:"btn btn-dark mb-1",type:"button"}," New Tenant ")])),c.state.showCreateTenant?(Object(n["t"])(),Object(n["d"])("form",{key:1,onSubmit:t[23]||(t[23]=Object(n["N"])((...e)=>c.createTenant&&c.createTenant(...e),["prevent"]))},[Object(n["L"])(Object(n["h"])("input",{id:"tenant-name",required:"",placeholder:"Tenant Name",type:"text","onUpdate:modelValue":t[21]||(t[21]=e=>c.state.newTenant.name=e)},null,512),[[n["G"],c.state.newTenant.name]]),Object(n["h"])("p",null,[Object(n["L"])(Object(n["h"])("input",{class:"mt-1",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:"",placeholder:"Phone Number",type:"text","onUpdate:modelValue":t[22]||(t[22]=e=>c.state.newTenant.phoneNum=e)},null,512),[[n["G"],c.state.newTenant.phoneNum]])]),T],32)):Object(n["e"])("",!0),c.state.tenants?(Object(n["t"])(),Object(n["d"])("div",f,[(Object(n["t"])(!0),Object(n["d"])(n["a"],null,Object(n["z"])(c.state.tenants,e=>(Object(n["t"])(),Object(n["d"])("div",{key:e.id},[Object(n["h"])("div",v,[Object(n["h"])("div",x,[Object(n["h"])("div",k,[Object(n["h"])("div",R,[Object(n["h"])("div",A,[Object(n["g"])(Object(n["E"])(e.name)+" ",1),q])]),Object(n["h"])("div",U,[Object(n["h"])("button",{type:"button",class:"delete btn btn-sm btn-dark",onClick:t=>c.removeTenant(e)}," x ",8,["onClick"])])]),Object(n["h"])("div",V,[Object(n["h"])("div",G,[Object(n["h"])("div",null,[I,Object(n["g"])(" "+Object(n["E"])(e.phone),1)])])])])])]))),128))])):Object(n["e"])("",!0)])])]),Object(n["h"])("div",L,[C,Object(n["h"])("div",E,[Object(n["h"])("div",P,[Object(n["h"])("input",{type:"file",id:"file",placeholder:"Inset file here",onChange:t[24]||(t[24]=(...e)=>c.upload&&c.upload(...e)),accept:"image/*"},null,32)])])]),Object(n["h"])("button",{onClick:t[25]||(t[25]=Object(n["N"])((...e)=>c.create&&c.create(...e),["prevent"])),type:"button",class:"btn btn-block btn-dark text-primary"}," Submit Form ")])])));var N=a("8a4e"),z=a("7b2f"),M=a("9e16"),S=a("4b72"),F=a("6c02"),D=(a("2591"),a("00ad"));const J=a("41f2");var K={name:"NewRentalAccordion",setup(){const e=Object(F["e"])(),t=Object(n["x"])({showCreateForm:!0,showCreateTenant:!0,showWarning:!1,newTenant:{},newOwner:{},newRental:{},rent:0,yearBuilt:0,address:{},ownerAddress:{},owners:[],tenants:[],createdRental:!1,imageData:null,img1:"",uploadValue:0});return Object(F["c"])(async()=>{if(!t.createdRental)try{t.tenants&&(N["a"].log(t.tenants),t.tenants.forEach(async e=>await S["a"].deleteBeforeRentalCreation(e.id)))}catch(e){N["a"].error(e)}t.newRental={},t.address={},t.ownerAddress={},t.tenants=[],t.newOwner={}}),{state:t,accordionPageTwo(){document.getElementById("accordion-two-button").click(),setTimeout(()=>{document.getElementById("street-name").focus()},1)},accordionPageThree(){document.getElementById("accordion-three-button").click(),setTimeout(()=>{document.getElementById("tenant-name").focus()},1)},async createOwner(){try{t.newOwner.address=t.ownerAddress,t.newOwner=await M["a"].create(t.newOwner),t.owners.push(t.newOwner),t.newOwner={},t.ownerAddress={}}catch(e){N["a"].error(e)}},async createTenant(){try{t.newTenant.rentalId=t.newRental.id;const e=await S["a"].create(t.newTenant);t.tenants.push(e),t.newTenant={}}catch(e){N["a"].error(e)}},async create(){try{t.newOwner.address=t.ownerAddress,t.newOwner=await M["a"].create(t.newOwner),t.newRental.tenants=t.tenants,t.newRental.address=t.address,t.newRental.ownerId=t.newOwner.id,t.newRental=await z["a"].create(t.newRental),t.createdRental=!0,document.getElementById("file").value="",e.push({name:"RentalDetailsPage",params:{id:t.newRental.id}})}catch(a){N["a"].error(a)}},async removeTenant(e){try{await S["a"].delete(e.id),t.tenants.splice(t.tenants.indexOf(e),1)}catch(a){N["a"].error(a)}},async upload(){const e=event.target.files,a=Array.from(e);N["a"].log(a);const n={targetSize:.2,quality:.75,maxWidth:800,maxHeight:600},c=new J(n);c.compress(a).then(async e=>{const{photo:a,info:n}=e[0];N["a"].log(n);const c=await Object(D["a"])(a.data,"images/rentals/"+this.createId(),{rentalId:t.newRental.id});N["a"].log(c.url),t.newRental.picture=c.url,N["a"].log(t.newRental.picture)})},createId(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length;for(let n=0;n<30;n++)e+=t.charAt(Math.floor(Math.random()*a));return e}}}};a("b0c9");K.render=B,K.__scopeId="data-v-4c069144";t["default"]=K},"039b":function(e,t,a){},b0c9:function(e,t,a){"use strict";a("039b")}}]);