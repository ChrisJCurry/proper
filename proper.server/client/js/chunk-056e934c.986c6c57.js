(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-056e934c"],{"0ea6":function(e,t,a){"use strict";a.r(t);var c=a("7a23");const s=Object(c["O"])("data-v-a8855084");Object(c["w"])("data-v-a8855084");const n={class:"new-rental-desktop"},r=Object(c["h"])("h4",{class:"border card-title round card-header bg-primary"}," Owner Information ",-1),l={class:"card border border-top-0 text-center"},d={action:"submit",class:"form-group"},o={class:"row pl-5"},i={class:"col"},b=Object(c["h"])("div",{class:"row"}," Name ",-1),h={class:"row"},O={class:"col"},j=Object(c["h"])("div",{class:"row"}," Phone Number ",-1),w={class:"row"},u={class:"col"},p=Object(c["h"])("div",{class:"row"}," Street ",-1),m={class:"row"},v={class:"col"},y=Object(c["h"])("div",{class:"row"}," City ",-1),f={class:"row"},g={class:"col"},A=Object(c["h"])("div",{class:"row"}," State ",-1),T={class:"row"},k={class:"col"},x=Object(c["h"])("div",{class:"row"}," Country ",-1),R={class:"row"},q={class:"col"},N=Object(c["h"])("div",{class:"row"}," Postal Code ",-1),U={class:"row"},C={class:"col"},G=Object(c["h"])("div",{class:"row"}," E-Mail ",-1),L={class:"row"},V={class:"card"},I=Object(c["h"])("div",{class:"bg-primary card-title card-header"},[Object(c["h"])("h4",null," Rental Information ")],-1),E={class:"card-body"},S={class:"row pl-4"},z={class:"col"},B=Object(c["h"])("div",{class:"row"}," Street Name ",-1),P={class:"row"},D={class:"col"},J=Object(c["h"])("div",{class:"row"}," Apartment Number ",-1),F={class:"row"},M={class:"col"},W=Object(c["h"])("div",{class:"row"}," City ",-1),Y={class:"row"},H={class:"col"},_=Object(c["h"])("div",{class:"row"}," Country ",-1),K={class:"row"},Q={class:"col"},X=Object(c["h"])("div",{class:"row"}," Postal Code ",-1),Z={class:"row"},$={class:"col"},ee=Object(c["h"])("div",{class:"row"}," Unit Rent ",-1),te={class:"row"},ae={class:"col"},ce=Object(c["h"])("div",{class:"row"}," Year Built ",-1),se={class:"row"},ne={class:"card"},re=Object(c["h"])("div",{class:"card-header bg-primary",id:"headingThree"},[Object(c["h"])("h4",{class:"mb-0"}," Tenant Info ")],-1),le={class:"card-body"},de={key:0},oe={class:"row"},ie={class:"col-2 ml-4"},be=Object(c["h"])("div",{class:"row"}," Tenant Name ",-1),he={class:"row"},Oe={class:"col-2"},je=Object(c["h"])("div",{class:"row"}," Tenant Phone Number ",-1),we={class:"row"},ue=Object(c["h"])("button",{type:"submit",class:"ml-2 btn btn-dark text-primary"}," Add Tenant ",-1),pe={key:2},me={class:"bg-primary border border-danger block py-1 my-1"},ve={class:"container-fluid"},ye={class:"row"},fe={class:"col-8"},ge={class:"title"},Ae=Object(c["h"])("hr",null,null,-1),Te={class:"col-1 offset-1"},ke={class:"row"},xe={class:"col"},Re=Object(c["h"])("span",{class:"font-weight-bold"},"-",-1),qe={class:"card"},Ne=Object(c["h"])("div",{class:"border-bottom border-dark card-header bg-primary",id:"headingTwo"},[Object(c["h"])("h4",{class:"mb-0"}," Add a picture? ")],-1),Ue={class:"card-body"};Object(c["u"])();const Ce=s((e,t,a,s,Ce,Ge)=>(Object(c["t"])(),Object(c["d"])(c["a"],null,[Object(c["h"])("div",n,[r,Object(c["h"])("div",l,[Object(c["h"])("form",d,[Object(c["h"])("div",o,[Object(c["h"])("div",i,[b,Object(c["h"])("div",h,[Object(c["L"])(Object(c["h"])("input",{id:"name",required:"",placeholder:"John Doe",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.state.newOwner.name=e)},null,512),[[c["G"],s.state.newOwner.name]])])]),Object(c["h"])("div",O,[j,Object(c["h"])("div",w,[Object(c["L"])(Object(c["h"])("input",{class:"mr-1",id:"phoneNum",required:"",placeholder:"(123) 456-7890",type:"tel",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}","onUpdate:modelValue":t[2]||(t[2]=e=>s.state.newOwner.phone=e)},null,512),[[c["G"],s.state.newOwner.phone]])])]),Object(c["h"])("div",u,[p,Object(c["h"])("div",m,[Object(c["L"])(Object(c["h"])("input",{id:"street",class:"mr-1",required:"",placeholder:"404 Not Found St",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>s.state.ownerAddress.street=e)},null,512),[[c["G"],s.state.ownerAddress.street]])])]),Object(c["h"])("div",v,[y,Object(c["h"])("div",f,[Object(c["L"])(Object(c["h"])("input",{id:"city",class:"mr-1",required:"",placeholder:"AlqualondÃ«",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>s.state.ownerAddress.city=e)},null,512),[[c["G"],s.state.ownerAddress.city]])])]),Object(c["h"])("div",g,[A,Object(c["h"])("div",T,[Object(c["L"])(Object(c["h"])("input",{id:"state",class:"mr-1",required:"",placeholder:"Eldamar",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>s.state.ownerAddress.state=e)},null,512),[[c["G"],s.state.ownerAddress.state]])])]),Object(c["h"])("div",k,[x,Object(c["h"])("div",R,[Object(c["L"])(Object(c["h"])("input",{id:"country",class:"mr-1",required:"",placeholder:"Aman",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>s.state.ownerAddress.country=e)},null,512),[[c["G"],s.state.ownerAddress.country]])])]),Object(c["h"])("div",q,[N,Object(c["h"])("div",U,[Object(c["L"])(Object(c["h"])("input",{id:"zip",class:"mr-1",pattern:"[0-9]{5}",required:"",placeholder:"0N341NG",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>s.state.ownerAddress.zip=e)},null,512),[[c["G"],s.state.ownerAddress.zip]])])]),Object(c["h"])("div",C,[G,Object(c["h"])("div",L,[Object(c["L"])(Object(c["h"])("input",{required:"",placeholder:"john.doe@test.com",type:"email",name:"ownerEmail",id:"ownerEmail","onUpdate:modelValue":t[8]||(t[8]=e=>s.state.newOwner.email=e)},null,512),[[c["G"],s.state.newOwner.email]])])])])])]),Object(c["h"])("div",V,[I,Object(c["h"])("div",E,[Object(c["h"])("div",S,[Object(c["h"])("div",z,[B,Object(c["h"])("div",P,[Object(c["L"])(Object(c["h"])("input",{class:"mr-1",required:"",placeholder:"Broadway",type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>s.state.address.street=e)},null,512),[[c["G"],s.state.address.street]])])]),Object(c["h"])("div",D,[J,Object(c["h"])("div",F,[Object(c["L"])(Object(c["h"])("input",{class:"mr-1",required:"",pattern:"[0-9]{4}",placeholder:"#A113",type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>s.state.address.aptNum=e)},null,512),[[c["G"],s.state.address.aptNum]])])]),Object(c["h"])("div",M,[W,Object(c["h"])("div",Y,[Object(c["L"])(Object(c["h"])("input",{class:"mr-1",required:"",placeholder:"New York",type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>s.state.address.city=e)},null,512),[[c["G"],s.state.address.city]])])]),Object(c["h"])("div",H,[_,Object(c["h"])("div",K,[Object(c["L"])(Object(c["h"])("input",{class:"mr-1",required:"",placeholder:"United States of America",type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>s.state.address.country=e)},null,512),[[c["G"],s.state.address.country]])])]),Object(c["h"])("div",Q,[X,Object(c["h"])("div",Z,[Object(c["L"])(Object(c["h"])("input",{class:"mr-1",required:"",pattern:"[0-9]{5}",placeholder:"12345",type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>s.state.address.zip=e)},null,512),[[c["G"],s.state.address.zip]])])]),Object(c["h"])("div",$,[ee,Object(c["h"])("div",te,[Object(c["L"])(Object(c["h"])("input",{class:"mr-1",required:"",placeholder:"$1400",type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>s.state.newRental.rent=e)},null,512),[[c["G"],s.state.newRental.rent]])])]),Object(c["h"])("div",ae,[ce,Object(c["h"])("div",se,[Object(c["L"])(Object(c["h"])("input",{class:"mr-1",required:"",placeholder:"1776",type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>s.state.newRental.yearBuilt=e)},null,512),[[c["G"],s.state.newRental.yearBuilt]])])])])])]),Object(c["h"])("div",ne,[re,Object(c["h"])("div",le,[s.state.showCreateTenant?Object(c["e"])("",!0):(Object(c["t"])(),Object(c["d"])("span",de,[Object(c["h"])("button",{onClick:t[16]||(t[16]=e=>s.state.showCreateTenant=!s.state.showCreateTenant),class:"btn btn-dark mb-1",type:"button"}," New Tenant ")])),s.state.showCreateTenant?(Object(c["t"])(),Object(c["d"])("form",{key:1,onSubmit:t[19]||(t[19]=Object(c["N"])(e=>s.createTenant(s.state.newTenant),["prevent"]))},[Object(c["h"])("div",oe,[Object(c["h"])("div",ie,[be,Object(c["h"])("div",he,[Object(c["L"])(Object(c["h"])("input",{required:"",placeholder:"John Doe",type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>s.state.newTenant.name=e)},null,512),[[c["G"],s.state.newTenant.name]])])]),Object(c["h"])("div",Oe,[je,Object(c["h"])("div",we,[Object(c["L"])(Object(c["h"])("input",{class:"mt-1",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",required:"",placeholder:"(123) 456-6789",type:"text","onUpdate:modelValue":t[18]||(t[18]=e=>s.state.newTenant.phoneNum=e)},null,512),[[c["G"],s.state.newTenant.phoneNum]])])])]),ue],32)):Object(c["e"])("",!0),s.state.tenants?(Object(c["t"])(),Object(c["d"])("div",pe,[(Object(c["t"])(!0),Object(c["d"])(c["a"],null,Object(c["z"])(s.state.tenants,e=>(Object(c["t"])(),Object(c["d"])("div",{key:e.id},[Object(c["h"])("div",me,[Object(c["h"])("div",ve,[Object(c["h"])("div",ye,[Object(c["h"])("div",fe,[Object(c["h"])("div",ge,[Object(c["g"])(Object(c["E"])(e.name)+" ",1),Ae])]),Object(c["h"])("div",Te,[Object(c["h"])("button",{type:"button",class:"delete btn btn-sm btn-dark",onClick:t=>s.removeTenant(e)}," x ",8,["onClick"])])]),Object(c["h"])("div",ke,[Object(c["h"])("div",xe,[Object(c["h"])("div",null,[Re,Object(c["g"])(" "+Object(c["E"])(e.phone),1)])])])])])]))),128))])):Object(c["e"])("",!0)])]),Object(c["h"])("div",qe,[Ne,Object(c["h"])("div",Ue,[Object(c["h"])("input",{type:"file",id:"file",placeholder:"Inset file here",onChange:t[20]||(t[20]=(...e)=>s.upload&&s.upload(...e)),accept:"image/*"},null,32)])])]),Object(c["h"])("button",{onClick:t[21]||(t[21]=Object(c["N"])((...e)=>s.create&&s.create(...e),["prevent"])),type:"button",class:"btn btn-block btn-dark text-primary"}," Submit Form ")],64)));var Ge=a("8a4e"),Le=a("7b2f"),Ve=a("9e16"),Ie=a("4b72"),Ee=a("6c02"),Se=(a("2591"),a("00ad"));const ze=a("41f2");var Be={name:"NewRentalDesktop",setup(){const e=Object(Ee["f"])(),t=Object(c["x"])({showCreateForm:!0,showCreateTenant:!0,showWarning:!1,newTenant:{},newOwner:{},newRental:{},rent:0,yearBuilt:0,address:{},ownerAddress:{},task:{},newTask:{},owners:[],tenants:[],createdRental:!1});return Object(Ee["c"])(async()=>{if(!t.createdRental)try{t.tenants&&(Ge["a"].log(t.tenants),t.tenants.forEach(async e=>await Ie["a"].deleteBeforeRentalCreation(e.id)))}catch(e){Ge["a"].error(e)}t.newRental={},t.address={},t.ownerAddress={},t.tenants=[],t.newOwner={}}),{state:t,async createOwner(){try{t.newOwner.address=t.ownerAddress,t.newOwner=await Ve["a"].create(t.newOwner),t.owners.push(t.newOwner),t.newOwner={},t.ownerAddress={}}catch(e){Ge["a"].error(e)}},async createTenant(e){try{e.rentalId=t.newRental.id,e=await Ie["a"].create(e),t.tenants.push(e),t.newTenant={}}catch(a){Ge["a"].error(a)}},async create(){try{t.newOwner.address=t.ownerAddress,t.newOwner=await Ve["a"].create(t.newOwner),t.newRental.tenants=t.tenants,t.newRental.address=t.address,t.newRental.ownerId=t.newOwner.id,t.newRental=await Le["a"].create(t.newRental),t.createdRental=!0,document.getElementById("file").value="",e.push({name:"RentalDetailsPage",params:{id:t.newRental.id}})}catch(a){Ge["a"].error(a)}},async removeTenant(e){try{await Ie["a"].delete(e.id),t.tenants.splice(t.tenants.indexOf(e),1)}catch(a){Ge["a"].error(a)}},async upload(){const e=event.target.files,a=Array.from(e);Ge["a"].log(a);const c={targetSize:.2,quality:.75,maxWidth:800,maxHeight:600},s=new ze(c);s.compress(a).then(async e=>{const{photo:a,info:c}=e[0];Ge["a"].log(c);const s=await Object(Se["a"])(a.data,"images/rentals/"+this.createId(),{rentalId:t.newRental.id});t.newRental.picture=s.url})},createId(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length;for(let c=0;c<30;c++)e+=t.charAt(Math.floor(Math.random()*a));return e}}},components:{}};a("6b41");Be.render=Ce,Be.__scopeId="data-v-a8855084";t["default"]=Be},"2fdf":function(e,t,a){},"6b41":function(e,t,a){"use strict";a("2fdf")}}]);